<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IndoT5 Hybrid Paraphraser</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            padding: 40px 20px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .form-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #333;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s ease;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .method-selector {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .method-option {
            flex: 1;
            min-width: 150px;
        }

        .method-option input[type="radio"] {
            display: none;
        }

        .method-option label {
            display: block;
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 0;
        }

        .method-option input[type="radio"]:checked + label {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .method-option label:hover {
            background: #e9ecef;
            border-color: #667eea;
        }

        .method-option input[type="radio"]:checked + label:hover {
            background: #5a6fd8;
        }

        .settings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .setting-item {
            display: flex;
            flex-direction: column;
        }

        .setting-item label {
            margin-bottom: 5px;
            font-size: 0.9em;
        }

        .setting-item input {
            padding: 10px;
            border: 2px solid #e0e0e0;
            border-radius: 5px;
            font-size: 14px;
        }

        .setting-item input:focus {
            outline: none;
            border-color: #667eea;
        }

        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
            color: #667eea;
        }

        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid #667eea;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .results {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .result-item {
            background: white;
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .result-item h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-text {
            font-size: 1.05em;
            line-height: 1.6;
            color: #555;
        }

        .quality-score {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
            font-size: 0.9em;
        }

        .score-bar {
            width: 100px;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            overflow: hidden;
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b 0%, #ffd93d 50%, #6bcf7f 100%);
            transition: width 0.3s ease;
        }

        .error {
            background: #fee;
            color: #c33;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .method-selector {
                flex-direction: column;
            }
            
            .settings {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>IndoT5 Hybrid Paraphraser</h1>
            <p>Sistem parafrase bahasa Indonesia dengan teknologi neural dan rule-based</p>
        </div>

        <div class="main-content">
            <form id="paraphraseForm">
                <div class="form-group">
                    <label for="inputText">Masukkan teks yang ingin diparafrase:</label>
                    <textarea id="inputText" placeholder="Contoh: Saya sedang belajar bahasa Indonesia dengan antusias." required></textarea>
                </div>

                <div class="form-group">
                    <label>Pilih metode parafrase:</label>
                    <div class="method-selector">
                        <div class="method-option">
                            <input type="radio" id="hybrid" name="method" value="hybrid" checked>
                            <label for="hybrid">
                                <strong>Hybrid</strong><br>
                                <small>Neural + Rule-based</small>
                            </label>
                        </div>
                        <div class="method-option">
                            <input type="radio" id="neural" name="method" value="neural">
                            <label for="neural">
                                <strong>Neural</strong><br>
                                <small>IndoT5 saja</small>
                            </label>
                        </div>
                        <div class="method-option">
                            <input type="radio" id="rule-based" name="method" value="rule-based">
                            <label for="rule-based">
                                <strong>Rule-based</strong><br>
                                <small>Transformasi aturan</small>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <label>Pengaturan:</label>
                    <div class="settings">
                        <div class="setting-item">
                            <label for="numVariations">Jumlah variasi:</label>
                            <input type="number" id="numVariations" min="1" max="10" value="3">
                        </div>
                        <div class="setting-item">
                            <label for="minQuality">Kualitas minimum:</label>
                            <input type="number" id="minQuality" min="0" max="1" step="0.1" value="0.6">
                        </div>
                        <div class="setting-item">
                            <label for="maxLength">Panjang maksimum:</label>
                            <input type="number" id="maxLength" min="10" max="1000" value="200">
                        </div>
                        <div class="setting-item">
                            <label for="temperature">Temperature:</label>
                            <input type="number" id="temperature" min="0.1" max="2.0" step="0.1" value="1.0">
                        </div>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn">
                    Parafrase Teks
                </button>
            </form>

            <div class="loading" id="loading">
                Memproses teks...
            </div>

            <div class="error" id="error"></div>

            <div class="results" id="results"></div>
        </div>
    </div>

    <script>
        document.getElementById('paraphraseForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const submitBtn = document.getElementById('submitBtn');
            const loading = document.getElementById('loading');
            const results = document.getElementById('results');
            const error = document.getElementById('error');
            
            // Hide previous results/errors
            results.style.display = 'none';
            error.style.display = 'none';
            
            // Show loading
            loading.style.display = 'block';
            submitBtn.disabled = true;
            
            // Get form data
            const formData = {
                text: document.getElementById('inputText').value,
                method: document.querySelector('input[name="method"]:checked').value,
                num_variations: parseInt(document.getElementById('numVariations').value),
                min_quality: parseFloat(document.getElementById('minQuality').value),
                max_length: parseInt(document.getElementById('maxLength').value),
                temperature: parseFloat(document.getElementById('temperature').value)
            };
            
            try {
                const response = await fetch('/paraphrase', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    displayResults(data);
                } else {
                    throw new Error(data.error || 'Terjadi kesalahan');
                }
            } catch (err) {
                error.textContent = err.message;
                error.style.display = 'block';
            } finally {
                loading.style.display = 'none';
                submitBtn.disabled = false;
            }
        });
        
        function displayResults(data) {
            const results = document.getElementById('results');
            results.innerHTML = '';
            
            if (data.paraphrases && data.paraphrases.length > 0) {
                data.paraphrases.forEach((item, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    
                    const qualityScore = item.quality_score || 0;
                    const scorePercentage = Math.round(qualityScore * 100);
                    
                    resultItem.innerHTML = `
                        <h3>Variasi ${index + 1}</h3>
                        <div class="result-text">${item.text}</div>
                        <div class="quality-score">
                            <span>Kualitas:</span>
                            <div class="score-bar">
                                <div class="score-fill" style="width: ${scorePercentage}%"></div>
                            </div>
                            <span>${scorePercentage}%</span>
                        </div>
                    `;
                    
                    results.appendChild(resultItem);
                });
            } else {
                results.innerHTML = '<div class="result-item"><h3>Tidak ada hasil</h3><div class="result-text">Tidak dapat menghasilkan parafrase untuk teks ini.</div></div>';
            }
            
            results.style.display = 'block';
        }
        
        // Add example text on page load
        document.addEventListener('DOMContentLoaded', function() {
            const examples = [
                'Saya sedang belajar bahasa Indonesia dengan penuh semangat.',
                'Teknologi artificial intelligence berkembang sangat pesat di era digital ini.',
                'Pendidikan merupakan kunci utama untuk membangun masa depan yang cerah.',
                'Kebudayaan Indonesia sangat beragam dan kaya akan tradisi.',
                'Pelestarian lingkungan hidup menjadi tanggung jawab kita bersama.'
            ];
            
            const inputText = document.getElementById('inputText');
            inputText.placeholder = examples[Math.floor(Math.random() * examples.length)];
        });
    </script>
</body>
</html> 
